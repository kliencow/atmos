{
  "dashboard": {
    "uid": "air_quality_v9",
    "title": "Air Quality ONE v9",
    "panels": [
      {
        "type": "timeseries",
        "title": "CO2 Concentration (PPM)",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"co2\")", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      },
      {
        "type": "timeseries",
        "title": "Temperature (°F)",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"temp\") |> map(fn: (r) => ({ r with _value: r._value * 1.8 + 32.0 }))", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "unit": "fahrenheit",
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      },
      {
        "type": "timeseries",
        "title": "Humidity (%)",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 8 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"humidity\")", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      },
      {
        "type": "timeseries",
        "title": "VOC Index",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 8 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"voc\")", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      },
      {
        "type": "timeseries",
        "title": "NOX Index",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 16 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"nox\")", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      },
      {
        "type": "timeseries",
        "title": "PM2.5 (µg/m\u00b3)",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 16 },
        "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
        "targets": [{ "query": "from(bucket: \"${bucket}\") |> range(start: v.timeRangeStart, stop: v.timeRangeStop) |> filter(fn: (r) => r._measurement == \"${measurement}\") |> filter(fn: (r) => r.location =~ /^${location}$/) |> filter(fn: (r) => r._field == \"pm25\")", "refId": "A" }],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "displayNameFromDS": "location=${__field.labels.location}, sensor=${__field.labels.sensor}"
            }
          }
        },
        "options": {
          "legend": {
            "calcs": ["lastNotNull"],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          }
        }
      }
    ],
    "templating": {
      "list": [
        {
          "name": "bucket",
          "query": "buckets()",
          "type": "query",
          "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" }
        },
        {
          "name": "measurement",
          "query": "import \"influxdata/influxdb/schema\"\nschema.measurements(bucket: \"${bucket}\")",
          "type": "query",
          "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" }
        },
        {
          "name": "location",
          "query": "import \"influxdata/influxdb/schema\"\nschema.tagValues(bucket: \"${bucket}\", tag: \"location\")",
          "type": "query",
          "datasource": { "type": "influxdb", "uid": "P951FEA4DE68E13C5" },
          "multi": true,
          "includeAll": true,
          "allValue": ".*",
          "current": {
            "text": "All",
            "value": "$__all"
          }
        }
      ]
    },
    "refresh": "10s",
    "schemaVersion": 39
  },
  "overwrite": true
}
